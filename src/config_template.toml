# proc-janitor configuration
# Location: ~/.config/proc-janitor/config.toml
# Documentation: https://github.com/jhlee0409/proc-janitor
#
# All values shown below are defaults. Uncomment and modify as needed.
# Environment variables (PROC_JANITOR_*) override these settings.

# ─── Scan Settings ───────────────────────────────────────────────────────────

# How often the daemon scans for orphaned processes (seconds, 1-3600)
scan_interval = 5

# Time to wait before killing a newly detected orphan (seconds, 0-3600)
# Prevents false positives from processes that are briefly re-parented.
grace_period = 30

# Time to wait after SIGTERM before sending SIGKILL (seconds, 1-60)
sigterm_timeout = 5

# ─── Target Patterns ────────────────────────────────────────────────────────
# Regex patterns matched against process command lines.
# Only orphaned processes (PPID=1) matching these patterns will be cleaned.
#
# Examples:
#   "node"            - any process with "node" in its command line
#   "node.*claude"    - Node.js processes related to Claude Code
#   "^/usr/bin/python" - Python processes started from /usr/bin
#   "webpack|vite"    - webpack or vite dev servers

targets = [
    "node.*claude",    # Claude Code processes
    "claude",          # Claude CLI
    "node.*mcp",       # MCP servers
]

# ─── Whitelist Patterns ─────────────────────────────────────────────────────
# Regex patterns for processes that should NEVER be killed, even if they
# match a target pattern. Whitelist takes priority over targets.
#
# Examples:
#   "node.*server"    - protect your web servers
#   "pm2"             - protect process managers
#   "node.*next"      - protect Next.js dev server

whitelist = [
    "node.*server",    # Web servers
    "pm2",             # Process managers
]

# ─── Logging ─────────────────────────────────────────────────────────────────

[logging]
# Enable or disable file logging
enabled = true

# Log directory (absolute path required, ~ is not expanded)
# Logs are rotated daily and old files are cleaned automatically.
path = "{log_path}"

# Number of days to keep log files (0-365)
retention_days = 7
